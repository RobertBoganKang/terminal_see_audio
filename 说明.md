# 终端查看音频

## 介绍

类似于 `Adobe Audition`，本项目可以帮助我们快速在终端中查看音频信息。 

以下功能已经实现：

* 切割音频；
* 画波形图、频谱图；
* 播放音频；

## 环境要求

Python库 `matplotlib`, `numpy`, `scipy`, `librosa`, `soundfile`, `pypng`。

终端库：`ffmpeg`, `sox`。

`T-IMG` 功能可以在链接 [timg](https://github.com/hzeller/timg/) 中找到并安装。

### T-IMG安装过程（摘自官网）

进入`src`目录进行安装，仅需图形展示的库（官网给出的是Ubuntu的办法，其他发行版需要找到相应的库）：

```bash
cd timg/src
sudo apt-get install libwebp-dev libgraphicsmagick++-dev
make && make install
```

## 如何使用

一些很简单的命令需要学习。

### 开始

```bash
python see.py <输入文件>
```

* `--input`, `-i` 输入语音地址；
* `--temp_folder`, `-tmp`（可选项）临时文件夹将会存放中间过程生成的音频和图片（程序结束后会被自动删除）；

### 命令

* `two numbers`：开始时间、结束时间；
  * 例如：`10 20` 的意思是**10s** 到 **20s**；
* 空字符串 `''`（直接按回车）画出上次结果的图片；
* `p`：放音频；
* `q`：结束程序；
* `r`重置开始时间、结束时间；
* `m`改变频谱图展示的 `模式`；一共有四种模式可供选择：
  * `fft`和 `fbank`更改 `y` 轴上的展示方式；
  * `power` 和 `log` 更改颜色渲染的展示方式（频谱图的值变换）；
  * 例如命令： `m fft` 的意思是，将模式改为 `fft` 展示方式；
* `sr`: 更改音频采样率；
  * 例如: `sr 16000` 的意思是变更为 `16000Hz`的采样率；
* `o`：更改输入音频文件路径（路径两端可以接`"`或`'`符号）；
  * 例如：`o demo/june.ogg`或者`o "demo/june.ogg"`的意思是将输入音频更改为`demo/june.ogg`；
* `tmp`：更改临时存放中间文件的文件夹；

### 高级命令

* `=`（警告：可能造成程序的严重崩溃）：进行python中的`eval`操作，或者进行python中的 `exec` 操作（进行系统参数赋值）；
  * 例如：`=1+1`来获得答案`2`；
  
  * 例如：`=self.n_window=512`命令可以将系统参数`n_window`设置为`512`；
* `sh`：来执行`shell`命令；
  
  * 例如：`sh echo $PATH`来显示`$PATH`参数；

## 样例展示

可以使用`./demo/june.ogg`来测试功能。本音频是我演奏的一个钢琴曲 （*柴可夫斯基 - 六月船歌 Op. 37 No. 6*），输入命令即可实现展示：

```bash
python see.py
```

如果想获得更加清晰的图片，请将文字大小调小。